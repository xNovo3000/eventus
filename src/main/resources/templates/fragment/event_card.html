<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

    <div class="container">
        <div class="row">

            <!--/*@thymesVar id="eventDto" type="io.github.xnovo3000.eventus.bean.dto.EventCardDto"*/-->
            <div class="card" th:fragment="eventCard(eventDto)">
                <!-- Body with all the information of the event -->
                <div class="card-body">
                    <h5 class="card-title"><span th:text="${eventDto.name}"></span></h5>
                    <h6 class="card-subtitle text-muted mb-2">Creato da: <span th:text="${eventDto.creatorUsername}"></span></h6>
                    <p class="card-text mb-2"><span th:text="${eventDto.description}"></span></p>
                    <p class="card-text">Posti occupati: <span th:text="${eventDto.occupiedSeats}"></span>/<span th:text="${eventDto.seats}"></span></p>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">Inizio: <span th:text="${#temporals.format(eventDto.start, 'd/M/yyyy H:mm')}"></span></li>
                    <li class="list-group-item">Fine: <span th:text="${#temporals.format(eventDto.end, 'd/M/yyyy H:mm')}"></span></li>
                </ul>
                <!-- Actions -->
                <div class="card-body d-flex flex-wrap">
                    <form th:if="${eventDto.canSubscribe}" th:action="@{/action/subscribe_to_event}" method="post">
                        <input type="hidden" id="sub-event-id" name="eventId" th:value="${eventDto.id}">
                        <input class="btn btn-success me-2 mb-2" type="submit" value="Iscriviti">
                    </form>
                    <form th:if="${eventDto.canUnsubscribe}" th:action="@{/action/unsubscribe_to_event}" method="post">
                        <input type="hidden" id="unsub-event-id" name="eventId" th:value="${eventDto.id}">
                        <input class="btn btn-danger me-2 mb-2" type="submit" value="Disiscriviti">
                    </form>
                    <a class="btn btn-outline-secondary me-2 mb-2" th:href="@{/event/{id}(id=${eventDto.id})}">Visualizza evento</a>
                </div>
            </div>

        </div>
    </div>

    <!-- Used only for testing -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha256-wLz3iY/cO4e6vKZ4zRmo4+9XDpMcgKOvv/zEU3OMlRo=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" integrity="sha256-4RctOgogjPAdwGbwq+rxfwAmSpZhWaafcZR9btzUk18=" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha256-m81NDyncZVbr7v9E6qCWXwx/cwjuWDlHCMzi9pjMobA=" crossorigin="anonymous"></script>

</html>